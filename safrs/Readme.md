##

This directory contains the code to construct documented REST APIs
It consists of
- db.py : sqlalchemy database definitions
- restful.py : REST web bindings
- swagger_doc.py : API documentation, implemented as decorators

## Implementation details
This section describes on a high level how safrs_rest is implemented (for low level details you can check the code and comments)

### Variables for SQLAlchemy, Flask, MarshMallow, Logging

Some variables have to be globally (cross-module) defined:
- app : flask app
- db  : flask-sqlalchemy database instance
- ma  : sqlalchemy-marshmallow instance (used for serialization of database objects)
- log : python logging instances

### SAFRSBase

- \_\_new\_\_
- \_\_init\_\_
- get_list
- clone
- sample
- sample_id
- get_swagger_doc: generate swagger object model and POST method documentation.

### Api

The flask_restful_swagger_2 Api class has been extended with following methods:
- ```expose_object``` Create endpoints to access the SAFRSBase classes
- ```expose_relationship```

In addition to creating endpoints, these functions also apply the ```api_decorator``` decorators:
- implement cors
- generate swagger documentation
- wrap the implemented HTTP methods (get, post, put, etc. ) to commit to the database after a request and
- implement exception handling

The standard Api ```add_resource``` method has been modified to parse the parameters generated by the SAFRSBase swagger methods

### SAFRSRestAPI
SAFRSRestAPI is a superclass for dynamically generated flask-restful endpoints.

### SAFRSRestRelationshipAPI

### Swagger Documentation

- ```swagger_doc```
- ```swagger_relationship_doc```

### Serialization

- MarshMallow
- ``safrs_serialize```
- The restful ```SAFRSJSONEncoder``` class calls the SAFRSBase subclass to_dict method to convert object attributes to a python dictionary which is then converted to JSON.


